{"version":3,"sources":["components/Card/Card.js","components/Participant/Participant.js","components/Spectator/reset.svg","components/Spectator/Spectator.js","components/App/App.js","index.js"],"names":["Card","className","value","filled","rest","type","classNames","Participant","name","useState","id","setId","setValue","a","fetch","process","method","headers","body","JSON","stringify","useEffect","eventSource","EventSource","encodeURIComponent","onmessage","event","parse","data","close","map","option","onClick","send","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","_ref2","d","SvgReset","_ref","svgRef","title","titleId","props","width","height","viewBox","ref","ForwardRef","Spectator","onSubmitName","estimations","setEstimations","inputRef","useRef","gotAllEstimations","every","onSubmit","preventDefault","current","placeholder","estimation","participant","App","setName","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.6ccc63e5.chunk.js","sourcesContent":["import classNames from 'classnames';\nimport React from 'react';\n\nfunction Card({ className, value, filled, ...rest }) {\n  return (\n    <button\n      type=\"button\"\n      className={classNames(\n        className,\n        'mx-4 w-44 h-64 flex items-center justify-center border-indigo-500 border-4 rounded-3xl text-10xl font-serif focus:outline-none',\n        filled ? 'bg-indigo-500 text-white' : 'text-indigo-500',\n      )}\n      {...rest}\n    >\n      {value}\n    </button>\n  );\n}\n\nexport default Card;\n","import classNames from 'classnames';\nimport React, { useEffect, useState } from 'react';\nimport Card from '../Card';\n\nfunction Participant({ className, name, ...rest }) {\n  const [id, setId] = useState(0);\n  const [value, setValue] = useState();\n\n  useEffect(() => {\n    const eventSource = new EventSource(\n      `${process.env.REACT_APP_API_URL}/participant?name=${encodeURIComponent(name)}`,\n    );\n    eventSource.onmessage = event => {\n      setId(JSON.parse(event.data));\n      setValue();\n    };\n\n    return () => eventSource.close();\n  }, [name]);\n\n  async function send(value) {\n    await fetch(`${process.env.REACT_APP_API_URL}/estimation`, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ id, value }),\n    });\n    setValue(value);\n  }\n\n  return (\n    <div className={classNames(className, 'h-full flex items-center justify-center')} {...rest}>\n      {[0, 1, 2, 3, 5, 8].map(option => (\n        <Card key={option} value={option} onClick={() => send(option)} filled={option === value}>\n          {option}\n        </Card>\n      ))}\n    </div>\n  );\n}\n\nexport default Participant;\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M13.5 2c-5.288 0-9.649 3.914-10.377 9h-3.123l4 5.917 4-5.917h-2.847c.711-3.972 4.174-7 8.347-7 4.687 0 8.5 3.813 8.5 8.5s-3.813 8.5-8.5 8.5c-3.015 0-5.662-1.583-7.171-3.957l-1.2 1.775c1.916 2.536 4.948 4.182 8.371 4.182 5.797 0 10.5-4.702 10.5-10.5s-4.703-10.5-10.5-10.5z\"\n});\n\nfunction SvgReset(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgReset);\nexport default __webpack_public_path__ + \"static/media/reset.1b0da0de.svg\";\nexport { ForwardRef as ReactComponent };","import classNames from 'classnames';\nimport React, { useEffect, useRef, useState } from 'react';\nimport Card from '../Card';\nimport { ReactComponent as ResetIcon } from './reset.svg';\n\nfunction Spectator({ className, onSubmitName, ...rest }) {\n  const [estimations, setEstimations] = useState([]);\n  const inputRef = useRef();\n\n  useEffect(() => {\n    const eventSource = new EventSource(`${process.env.REACT_APP_API_URL}/spectator`);\n    eventSource.onmessage = event => {\n      setEstimations(JSON.parse(event.data));\n    };\n\n    return () => eventSource.close();\n  }, []);\n\n  function handleSubmit(event) {\n    event.preventDefault();\n    onSubmitName(inputRef.current.value);\n  }\n\n  function reset() {\n    fetch(`${process.env.REACT_APP_API_URL}/reset`, { method: 'POST' });\n  }\n\n  const gotAllEstimations = estimations.every(({ value }) => typeof value === 'number');\n\n  return (\n    <div\n      className={classNames(className, 'h-full flex flex-col items-center justify-evenly')}\n      {...rest}\n    >\n      <form className=\"flex\" onSubmit={handleSubmit}>\n        <input\n          className=\"rounded-l-lg border-green-500 border-2 focus:outline-none\"\n          ref={inputRef}\n          name=\"name\"\n          type=\"text\"\n          placeholder=\"Name\"\n        />\n        <button\n          className=\"rounded-r-lg bg-green-500 px-8 text-white font-bold focus:outline-none\"\n          type=\"submit\"\n        >\n          Join\n        </button>\n      </form>\n      <div className=\"flex\">\n        {estimations.length === 0 && <p>No one has joined yet.</p>}\n        {estimations.map(estimation => (\n          <div key={estimation.participant.id}>\n            <Card\n              value={gotAllEstimations && estimation.value}\n              filled={typeof estimation.value === 'number'}\n            />\n            <p className=\"mt-4 text-xl text-center\">{estimation.participant.name}</p>\n          </div>\n        ))}\n      </div>\n      <button className=\"focus:outline-none\" type=\"button\" onClick={reset}>\n        <ResetIcon className=\"w-8 h-8 text-green-500 fill-current\" />\n      </button>\n    </div>\n  );\n}\n\nexport default Spectator;\n","import React, { useState } from 'react';\nimport Participant from '../Participant';\nimport Spectator from '../Spectator';\n\nfunction App() {\n  const [name, setName] = useState('');\n\n  return name ? <Participant name={name} /> : <Spectator onSubmitName={setName} />;\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/App';\nimport './index.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}